

# star法则

S：situation

T：task

A：action

R：result



# 个人介绍

面试官，您好！我叫成龙生，是江西软件职业技术大学大四的学生，所学专业是软件工程，我自己对软件开发很感兴趣，相关专业课成绩都在 90 左右，参加过学院软件开发比赛。

然后，这个前后端在大学期间我都学习过，对后端Java开发的技术栈学习的比较深，现在比较熟练地使用Spring Boot, mybatis-plus, vue, element-ui开发后台系统，同时也在学习分布式和微服务就是ruoyi系统。

大三上学期也是在学院软工公司参与了考试系统的项目，主要负责编写文档和接口，对前后端分离项目的开发流程有一定了解。我自己在网上学习了几个开源项目，根据文档开发实现，理解和感触比较深的就是个人博客和商城后台管理。



# 项目介绍

## 个人博客

所有人都可以看到展示的博客，以及查看博客详情。但是匿名用户无法对博客进行评价，需要登录之后才能评价。

实现登录的功能使用Spring Security + JWT的方式，首先前端post方式提交登录表单数据，请求到达过滤器会检查请求头有没有携带服务器签发的token，调用Spring Security提供的ProviderManager接口的方法进行认证，通过就生成jwt，然后把用户信息存入redis。接着我要实现UserDetailsService接口实现这个loadUserByUsername方法，在这里查询数据库验证用户账号密码是否真确。

登录成功之后，所有请求的头都会携带服务器发放的token，自定义一个过滤器验证 jwt 生成的 token ，校验成功就从 redis 获取用户信息并存入SecurityContextHolder（LocalThread）。

注销就是把redis上面存的用户信息删掉就好了。



浏览量一开始我是直接操作博客表的，不过过了一段时间后我想了下这个问题。在并发量大的情况下

浏览量是通过redis配合完成的，点击一次就更新一下页面，但是这样频繁操作数据库会造成很大的压力。就使用redis缓存的hash来实现点赞，首先把数据库点赞数存在redis缓存，请求一次就在redis里面对这一篇博客的点赞记录加一，设置定时任务，定期把redis中点赞数据更新同步至数据库中。这里我在启动类上加上@EnableScheduling开启定时任务，在具体方法上使用@Scheduling，用Cron表达式设置时间。



管理员查看登录日志

使用aop实现，自定义一个日志注解，在需要打印日志的方法上标注。以自定义日志注解为切点，在切点方法上进行环绕增强。从RequestContextHolder中获取servlet请求，从ProceedingJoinPoint获取签名，分别获取到了请求信息和被增强方法信息。

使用Slf4j的log方法把信息打印在控制台。



# 死锁



# mybatis缓存



# MySQL

## 索引

### 适合创建索引

1. 字段的数值有唯一性的限制

   唯一索引

2. 频繁作为 WHERE 查询条件的字段

3. 经常 GROUP BY 和 ORDER BY 的列

   组合索引

4. UPDATE、DELETE 的 WHERE 条件列

5. DISTINCT 字段需要创建索引

6. 多表 JOIN 连接操作时，创建索引注意事项

   1. 连接表的数量不要超过三张
   2. 对 WHERE 条件创建索引
   3. 对连接字段创建索引，类型必须一致

7. 使用列的类型小的创建索引

8. 使用字符串前缀创建索引

   区分度计算

   ```mysql
   # 截取前10个字符的选择度
   SELECT COUNT(DISTINCT LEFT(address, 10)) / COUNT(*) AS sub10 FROM shop;
   ```

9. 区分度高(散列性高)的列适合作为索引

10. 使用最频繁的列放到联合索引的左侧

    这样也可以较少的建立一些索引。同时，由于"最左前缀原则"，可以增加联合索引的使用率。

11.  在多个字段都要创建索引的情况下，联合索引优于单值索引



## 事务



## SQL优化



## 查询优化



# Redis

## 数据类型

五大常用数据类：String, List, Set, ZSet, Hash



## 数据结构

String: SDS(Simple Dynamic String) 简单动态字符串

List: quick list快表



## 雪崩，击穿，穿透

雪崩：redis 中的缓存在同一时刻过期，恰好这个时候有大量的并发请求，没有查询到在 redis 缓存中查询到数据，请求都到达了持久层造成巨大的压力，系统容易宕机。

处理方案：加上随机过期时间。

击穿：页面上经常使用的热点数据比如轮播图之类的，刚好到过期时间而又有大量的请求进来访问该数据，所以穿过了这一个点达到数据库造成 IO 压力，系统宕机。

处理方案：加锁。

穿透：请求数据库和redis缓冲都没有的值

处理方案：设置空值。



# 项目中遇到的问题

影响比较深刻的是个人博客里面的CommandRunner预先数据加载，在这个实现这个接口的类里面查询访问量存在



你先做一个简单的自己介绍？

你最近最了解的一个项目？

你觉得你这个项目里面最难的点是哪里？

我想问一下Java方面的问题，首先Java的基本数据类型有八大类，是哪八大类？

那个int是占多少字节？

4

float嘞？

4

Java里面String与StringBuffer有什么区别？

那String的equals方法有了解过吗？

IO方面有了解过吗？

那有了解过非阻塞式IO吗

反射的话有了解过吗？

线程嘞，创建线程的方式有几种？

如何保证多线程安全？

synchronized的效率比较低，有什么优化的方式？有什么效率高一些的方法？

常用的集合有哪些？

List、Set、Queue、Map接口下面的实现类

线程安全的集合用过吗？

集合ArrayList在foreach的时候移除会报错是什么原因？

modCount和extendModCount

那你是怎么解决这个的？

你的数据库是MSQL，那你说下MySQL事务的隔离级别？

默认的是哪一个？

默认是可重复读？

MySQL的查询优化有哪些？

Linux的话有用过吗？

查询进程的命令？

杀死进程呢？

端口呢？

你部署是用docker容器直接部署的是吧？

那docker的基本指令你会什么？

我想看到某个容器的日志怎么看？

我这边大概情况了解了，你有什么了解的吗？

您是这个项目技术负责人？

您对公司业务前景看法？

我觉得答得条理不是很好，您有什么评价建议吗？



抽象类和接口的区别

启动线程的方式

多线程操作同一个数据需要注意些什么

读写锁

读读、读写、写写

